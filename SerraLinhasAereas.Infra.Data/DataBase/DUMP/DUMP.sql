CREATE DATABASE Serra;

GO

USE Serra

GO

CREATE TABLE CLIENTES (
	CPF BIGINT NOT NULL,
	NOME VARCHAR(250) NOT NULL,
	SOBRENOME VARCHAR(250) NOT NULL,
	CEP BIGINT NOT NULL,
	RUA VARCHAR(250) NOT NULL,
	BAIRRO VARCHAR(250) NOT NULL,
	NUMERO INT NOT NULL, 
	COMPLEMENTO VARCHAR(250) NOT NULL,

	CONSTRAINT PK_CpfCliente PRIMARY KEY(CPF),
);

GO

INSERT INTO CLIENTES VALUES
	(12312312345, 'Maria', 'Silva', 88521261, 'RUA', 'Guarujá', 18, 'COMPLEMENTO1'),
	(23423423456, 'João', 'Pagno', 88521322, 'RUA', 'Petrópolis', 66, 'COMPLEMENTO2'),
	(34534534567, 'Jorge', 'Pereira', 8852163, 'RUA', 'Centro', 54, 'COMPLEMENTO3'),
	(45645645678, 'Evelin', 'Martins', 8867864, 'RUA', 'Várzea', 180, 'COMPLEMENTO4'),
	(56756756789, 'Vitória', 'Souza', 88521255, 'RUA', 'Universitário', 01, 'COMPLEMENTO5');

GO

CREATE TABLE PASSAGENS
(
	ID INT IDENTITY(1,1) NOT NULL,
	ORIGEM VARCHAR(100) NOT NULL,
	DESTINO VARCHAR(100) NOT NULL,
	VALOR MONEY NOT NULL,
	DATA_DE_ORIGEM DATETIME NOT NULL,
	DATA_DE_DESTINO DATETIME NOT NULL,
	DISPONIVEL BIT NOT NULL,

	CONSTRAINT PK_IdPassagens PRIMARY KEY(ID),
);

GO

INSERT INTO PASSAGENS VALUES
	('Lages', 'Florianópolis', 10.3, '18/03/2022','18/03/2023', 1),
	('São Joquim', 'Biguaçu', 10.4, '19/04/2022','19/03/2023', 1),
	('Rio de Janeiro', 'São Paulo', 10.5, '20/05/2022','20/03/2023', 1),
	('Recife', 'Bahia', 10.6, '21/03/2022','21/06/2023', 1),
	('Belo Horizonte', 'Brasília', 10.7, '22/07/2022','22/03/2023', 1),
	('Belo Horizonte', 'Florianópolis', 10.3, '18/03/2022','18/03/2023', 1),
	('Lages', 'Biguaçu', 10.4, '19/04/2022','19/03/2023', 1),
	('Rio de Janeiro', 'Lages', 10.5, '20/05/2022','20/03/2023', 1),
	('Gramado', 'Bahia', 10.6, '21/03/2022','21/06/2023', 0),
	('Belo Horizonte', 'Brasília', 10.7, '22/07/2022','22/03/2023', 0);

GO

CREATE TABLE VIAGENS
(
	CODIGO_DE_RESERVA VARCHAR(8) NOT NULL,
	DATA_DE_COMPRA DATETIME NOT NULL,
	VALOR_TOTAL MONEY NOT NULL,
	CPF_CLIENTE BIGINT NOT NULL,
	ID_PASSAGEM_DE_IDA INT NOT NULL,
	ID_PASSAGEM_DE_VOLTA INT NULL,
	TEM_VOLTA BIT NOT NULL,

	CONSTRAINT PK_CodigoViagens PRIMARY KEY(CODIGO_DE_RESERVA),
	CONSTRAINT FK_CpfClienteVIagem FOREIGN KEY(CPF_CLIENTE) REFERENCES CLIENTES(CPF),
	CONSTRAINT FK_IdPassagemIda FOREIGN KEY(ID_PASSAGEM_DE_IDA) REFERENCES PASSAGENS(ID),
	CONSTRAINT FK_IdPassagemVolta FOREIGN KEY(ID_PASSAGEM_DE_VOLTA) REFERENCES PASSAGENS(ID)
);

GO

INSERT INTO VIAGENS VALUES
	('ABC123', '10/03/2020', 25.31, 12312312345, 1, 2, 1),
	('BCD234', '19/03/2019', 25.32, 23423423456, 3, NULL, 0),
	('CDE345', '20/03/2021', 25.33, 34534534567, 4, 5, 1),
	('DEF456', '21/03/2022', 25.34, 45645645678, 6, NULL, 0),
	('EFG567', '22/03/2020', 25.35, 56756756789, 7, 8, 1);

GO